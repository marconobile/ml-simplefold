_target_: datasets.train_datamodule.SimpleFoldTrainingDataModule

datasets:
  - _target_: datasets.train_datamodule.DatasetConfig
    # For a locally processed dataset, follow the structure expected by
    # `src/simplefold/datasets/train_datamodule.py`:
    #   <tokenized_dir>/{tokens,records,manifest.json}
    #   <target_dir>/structures/{record_id}.npz
    # The sample `training_data/` folder in this repo contains both, so we
    # can point both dirs at the same root.
    data_name: local_pdb
    tokenized_dir: /storage_common/nobilm/training_data
    target_dir: /storage_common/nobilm/training_data
    manifest_path: /storage_common/nobilm/training_data/manifest.json
    cropper:
      _target_: boltz_data_pipeline.crop.boltz.BoltzCropper
      min_neighborhood: 0
      max_neighborhood: 40
    filters:
      - _target_: boltz_data_pipeline.filter.dynamic.resolution.ResolutionFilter
        resolution: 5.0
      # NOTE: Records produced from `process_pdb.py` often don't have deposited/
      # released/revised dates, so a DateFilter would reject all samples.

filters:
    - _target_: boltz_data_pipeline.filter.dynamic.size.SizeFilter
      min_chains: 1
      max_chains: 300

tokenizer:
  _target_: boltz_data_pipeline.tokenize.boltz_protein.BoltzTokenizer

featurizer:
  _target_: boltz_data_pipeline.feature.featurizer.BoltzFeaturizer

# # Ligand symmetry lookup table (optional for protein-only training).
# # If you have one, set this to the pickled file or instantiate
# # `boltz_data_pipeline.feature.symmetry.get_symmetries`.
# symmetries: {}
symmetries: /home/nobilm@usi.ch/ml-simplefold/symmetry.pkl
max_tokens: 256
max_atoms: 2304
pad_to_max_tokens: False
pad_to_max_atoms: False
batch_size: 256
num_workers: 16
pin_memory: True
return_train_symmetries: False
min_dist: 2.0
max_dist: 22.0
num_bins: 64
atoms_per_window_queries: 32
rotation_augment_ref_pos: False
rotation_augment_coords: True
